{"version":3,"sources":["utils/firebase.js","components/topbar/search/search-results.js","components/topbar/search/search.js","components/topbar/topbar.js","components/sidebar/styled-tree-item.js","components/sidebar/dialog.js","components/sidebar/sidebar.js","utils/check-date.js","components/editor/editor-task-item/editor-task-item-component.js","components/editor/editor-task-item/editor-task-item-extension.js","components/editor/bubble-menu.js","pages/editor.js","components/task-item/one-line-extension.js","components/task-item/task-item.js","pages/tasks.js","pages/main.js","hooks/event-listener.js","pages/sign-in.js","pages/sign-up.js","components/app/app.js","index.js"],"names":["db","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getFirestore","AuthContext","createContext","AuthContextProvider","props","useState","getAuth","currentUser","user","setUser","error","setError","useEffect","unsubscribe","onAuthStateChanged","Provider","value","useAuthState","auth","useContext","isAuthenticated","SearchResults","results","setActiveFile","setSearch","console","log","card","map","item","startIndex","rawText","indexOf","Math","max","resultIndexStart","endIndex","length","ListItem","sx","flexDirection","alignItems","button","onClick","id","Typography","variant","title","display","whiteSpace","component","slice","fontWeight","resultIndexEnd","Divider","List","style","position","top","left","transform","width","bgcolor","borderRadius","p","CustomSearch","styled","theme","shape","backgroundColor","alpha","palette","common","white","marginLeft","breakpoints","up","SearchIconWrapper","height","pointerEvents","justifyContent","StyledInputBase","InputBase","color","padding","spacing","paddingLeft","transition","transitions","create","Search","papers","search","handleSearchClose","handleSearchOpen","searchField","setSearchField","searchShow","setSearchShow","setResults","filteredResults","data","updatedDataArr","i","toLowerCase","includes","push","children","searchResults","Modal","open","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","placeholder","inputProps","onChange","event","target","StyledAppBar","AppBar","shouldForwardProp","prop","easing","sharp","duration","leavingScreen","easeOut","enteringScreen","Topbar","handleDrawerOpen","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","handleMobileMenuClose","menuId","renderMenu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuItem","signOut","mobileMenuId","renderMobileMenu","IconButton","size","elevation","Toolbar","edge","mr","flexGrow","xs","md","currentTarget","TransitionComponent","useSpring","from","opacity","to","div","Collapse","StyledTreeItemRoot","TreeItem","treeItemClasses","content","typography","fontWeightMedium","text","main","action","hover","focus","label","group","CustomContent","forwardRef","ref","classes","className","nodeId","iconProp","icon","expansionIcon","displayIcon","addPaper","deletePaper","expand","labelIcon","activeFile","useTreeItem","disabled","expanded","selected","focused","handleExpansion","handleSelection","preventSelection","handleSelectionClick","mouse","setMouse","clsx","root","onMouseDown","onMouseEnter","onMouseLeave","pr","py","textDecoration","StyledTreeItem","ContentComponent","DialogComponent","openDialog","setOpenDialog","lastClickedDelete","handleClose","Dialog","DialogTitle","DialogActions","Button","autoFocus","DrawerHeader","mixins","toolbar","DragDiv","cursor","borderTop","right","bottom","zIndex","Sidebar","handleDrawerClose","drawerWidth","setDrawerWidth","handleExpandClick","useTheme","handleMouseUp","document","removeEventListener","handleMouseMove","e","newWidth","clientX","localStorage","setItem","JSON","stringify","setLastClickedDelete","Drawer","flexShrink","userSelect","boxSizing","anchor","addEventListener","direction","TreeView","defaultCollapseIcon","defaultExpandIcon","multiSelect","overflowY","my","onNodeSelect","nodeIds","ContentProps","TaskAltIcon","elements","treeItems","treeItemData","NotesIcon","CheckDate","newValue","getWeek","Date","toLocaleDateString","weekday","getDay","month","day","showedDate","setShowedDate","setId","task","extension","options","tasks","filter","node","attrs","date","checkbox","updateAttributes","storage","object","delete","Checkbox","checked","contentEditable","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","handleDatePicker","renderInput","inputRef","InputProps","endAdornment","inputRegex","Node","name","addAttributes","default","this","rendered","keepOnSplit","addStorage","defining","parseHTML","tag","renderHTML","HTMLAttributes","mergeAttributes","addKeyboardShortcuts","shortcuts","Enter","editor","commands","splitListItem","liftListItem","nested","Tab","sinkListItem","addNodeView","ReactNodeViewRenderer","Component","addInputRules","wrappingInputRule","find","type","getAttributes","match","addProseMirrorPlugins","Plugin","appendTransaction","_transactions","oldState","newState","doc","tr","descendants","pos","parent","isBlock","setNodeMarkup","undefined","uuid","StyledToggleButtonGroup","ToggleButtonGroup","margin","border","BubbleMenuComponent","tippyOptions","maxWidth","Paper","ToggleButton","isActive","chain","toggleBold","run","toggleItalic","toggleUnderline","flexItem","orientation","mx","level","setParagraph","setHeading","toggleBulletList","toggleBlockquote","textAlign","setTextAlign","CustomDocument","Document","extend","Editor","getActiveFile","onUpdateNote","onUpdateTask","onDeleteTask","saveData","setContent","useEditor","autofocus","extensions","StarterKit","configure","Dropcursor","TextAlign","types","alignments","Underline","taskItem","TaskList","Placeholder","onBlur","view","dom","innerText","getJSON","getText","lastTask","setLastTask","fileId","check","Box","px","align","OneLine","Extension","key","PluginKey","handleKeyDown","shiftKey","TaskItem","taskInfo","setTaskInfo","taskContent","setTaskContent","onUpdate","onKeyDown","textDecorationLine","createTheme","Tasks","getFileId","dates","Set","sort","order","a","b","hasOwnProperty","varA","toUpperCase","varB","comparison","compareValues","ThemeProvider","mb","tasksElements","tranformedDate","charAt","renderedTasksWithOutDate","startIcon","mt","textTransform","Main","showEditor","showTasks","setPaper","setTasks","dataGetted","setDataGetted","getDocument","getDoc","uid","docSnap","exists","parse","setOpen","Array","isArray","forEach","dataItem","setExpanded","expandArr","newTask","arrB","arrA","saveNotification","setSaveNotification","setDoc","eventName","handler","element","window","savedHandler","useRef","current","eventListener","useEventListener","ctrlKey","preventDefault","handleSaveNotificationClose","reason","fontSize","CssBaseline","paperId","updatedNote","Snackbar","autoHideDuration","message","Copyright","getFullYear","SignIn","handleSubmit","useCallback","email","password","signInWithEmailAndPassword","alert","Container","marginTop","Avatar","m","onSubmit","noValidate","TextField","required","fullWidth","autoComplete","Grid","container","SignUp","setUserId","createUserWithEmailAndPassword","sm","AuthenticatedRoute","UnauthenticatedRoute","App","path","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2a90b2b3.chunk.js","sourcesContent":["import { getAuth, onAuthStateChanged } from '@firebase/auth'\r\nimport { initializeApp } from 'firebase/app'\r\nimport { getFirestore } from \"@firebase/firestore\"\r\nimport { useState, useEffect, useContext, createContext } from 'react'\r\n\r\nexport const firebaseApp = initializeApp({\r\n    apiKey: process.env.REACT_APP_API_KEY,\r\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n    projectId: process.env.REACT_APP_PROJECT_ID,\r\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n    appId: process.env.REACT_APP_APP_ID,\r\n    measurementId: process.env.REACT_APP_MEASUREMENT_ID\r\n})\r\n\r\nexport const db = getFirestore()\r\n\r\nexport const AuthContext = createContext()\r\n\r\nexport const AuthContextProvider = props => {\r\n    const [user, setUser] = useState(getAuth().currentUser)\r\n    const [error, setError] = useState()\r\n    \r\n\r\n    useEffect(() => {\r\n        const unsubscribe = onAuthStateChanged(getAuth(), setUser, setError)\r\n        return () => unsubscribe()\r\n    }, [])\r\n\r\n\r\n    // useEffect(() => {\r\n    //     console.log(user)\r\n    // }, [user])\r\n    return <AuthContext.Provider value={{ user, error }} {...props} />\r\n}\r\n\r\nexport const useAuthState = () => {\r\n    const auth = useContext(AuthContext)\r\n    return { ...auth, isAuthenticated: auth.user != null }\r\n}\r\n","import React from 'react'\r\nimport { Box, List, ListItem, Divider, Typography, } from '@mui/material'\r\n\r\nexport default function SearchResults({ results, setActiveFile, setSearch }) {\r\n    console.log(results)\r\n    const handleClick = (id) => {\r\n        setActiveFile(id)\r\n        setSearch(false);\r\n    }\r\n\r\n    const card = (results) ? (results.map(item => {\r\n        let startIndex = item.rawText.indexOf(' ', Math.max(item.resultIndexStart - 15, 0)), endIndex = item.resultIndexStart + 80 < item.rawText.length ? item.rawText.indexOf(' ', item.resultIndexStart + 80) : item.rawText.length\r\n\r\n        console.log(startIndex, endIndex)\r\n        return (\r\n            <div>\r\n                <ListItem sx={{ flexDirection: 'column', alignItems: 'flex-start' }} button onClick={() => handleClick(item.id)}>\r\n                    <Typography variant=\"h6\">{item.title}</Typography>\r\n                    <Box sx={{ display: 'inline-block', whiteSpace: 'pre-wrap' }}>\r\n                        <Typography component=\"span\">{startIndex !== 0 ? '...' : ''}{item.rawText.slice(startIndex, item.resultIndexStart)}</Typography>\r\n                        <Typography component=\"span\" fontWeight=\"bold\">{item.rawText.slice(item.resultIndexStart, item.rawText.indexOf(' ', item.resultIndexEnd))}</Typography>\r\n                        <Typography component=\"span\">{item.rawText.slice(item.rawText.indexOf(' ', item.resultIndexEnd), endIndex)}{endIndex !== item.rawText.length ? '...' : ''}</Typography>\r\n                    </Box>\r\n                </ListItem>\r\n                <Divider />\r\n            </div>)\r\n    })) : (<Typography>Результатів не знайдено</Typography>)\r\n    return (\r\n        <div>\r\n            <List sx={{ flexDirection: 'column' }}>\r\n                {card}\r\n            </List>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport Backdrop from '@mui/material/Backdrop';\r\nimport Box from '@mui/material/Box';\r\nimport Modal from '@mui/material/Modal';\r\nimport Fade from '@mui/material/Fade';\r\nimport { styled, alpha } from '@mui/material/styles';\r\nimport InputBase from '@mui/material/InputBase';\r\nimport SearchIcon from '@mui/icons-material/Search';\r\nimport SearchResults from './search-results';\r\n\r\nconst style = {\r\n    position: 'fixed',\r\n    top: '30%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 600,\r\n    bgcolor: 'background.paper',\r\n    borderRadius: 2,\r\n    p: 4,\r\n};\r\n\r\nconst CustomSearch = styled('div')(({ theme }) => ({\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: alpha(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n        width: 'auto',\r\n    },\r\n}));\r\n\r\nconst SearchIconWrapper = styled('div')(({ theme }) => ({\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n}));\r\n\r\nconst StyledInputBase = styled(InputBase)(({ theme }) => ({\r\n    color: 'inherit',\r\n    '& .MuiInputBase-input': {\r\n        padding: theme.spacing(1, 1, 1, 0),\r\n        // vertical padding + font size from searchIcon\r\n        paddingLeft: `calc(1em + ${theme.spacing(2)})`,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '20ch',\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function Search({ papers, search, setSearch, handleSearchOpen, handleSearchClose, setActiveFile }) {\r\n    const [searchField, setSearchField] = useState(\"\");\r\n    const [searchShow, setSearchShow] = useState(false);\r\n    const [results, setResults] = useState(false);\r\n\r\n    const filteredResults = (data = papers) => {\r\n        const updatedDataArr = [];\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n            if(data[i].rawText) {\r\n                console.log(data[i])\r\n            }\r\n            \r\n            if (data[i].rawText && data[i].rawText.toLowerCase().includes(searchField)) {\r\n                updatedDataArr.push({\r\n                    ...data[i],\r\n                    resultIndexStart: data[i].rawText.toLowerCase().indexOf(searchField),\r\n                    resultIndexEnd: data[i].rawText.toLowerCase().indexOf(searchField)+searchField.length\r\n                })\r\n            } else if (data[i].children) {\r\n                updatedDataArr.push(...filteredResults(data[i].children))\r\n            }\r\n        }\r\n\r\n\r\n        if (data === papers) {\r\n            setResults(updatedDataArr)\r\n        } else {\r\n            return updatedDataArr\r\n        }\r\n    }\r\n\r\n    const searchResults = (searchShow) ? (<SearchResults results={results} setActiveFile={setActiveFile} setSearch={setSearch} />) : (null)\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <Modal\r\n                    aria-labelledby=\"transition-modal-title\"\r\n                    aria-describedby=\"transition-modal-description\"\r\n                    open={search}\r\n                    onClose={handleSearchClose}\r\n                    closeAfterTransition\r\n                    BackdropComponent={Backdrop}\r\n                    BackdropProps={{\r\n                        timeout: 500,\r\n                    }}\r\n                >\r\n                    <Fade in={search}>\r\n                        <Box sx={style}>\r\n                            <CustomSearch>\r\n                                <SearchIconWrapper>\r\n                                    <SearchIcon />\r\n                                </SearchIconWrapper>\r\n                                <StyledInputBase\r\n                                    placeholder=\"Пошук…\"\r\n                                    inputProps={{ 'aria-label': 'search' }}\r\n                                    value={searchField}\r\n                                    onChange={(event) => {\r\n                                        if (event) {\r\n                                            setSearchField(event.target.value.toLowerCase())\r\n                                        }\r\n                                        (event.target.value === '') ? (setSearchShow(false)) : (setSearchShow(true))\r\n                                        filteredResults()\r\n                                    }}\r\n                                />\r\n                            </CustomSearch>\r\n                            {searchResults}\r\n                        </Box>\r\n                    </Fade>\r\n                </Modal>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { styled } from '@mui/material/styles'\r\nimport MenuIcon from '@mui/icons-material/Menu'\r\nimport MenuItem from '@mui/material/MenuItem'\r\nimport Menu from '@mui/material/Menu'\r\nimport SearchIcon from '@mui/icons-material/Search'\r\nimport AccountCircle from '@mui/icons-material/AccountCircle'\r\nimport MoreIcon from '@mui/icons-material/MoreVert'\r\nimport { AppBar, Box, Toolbar, IconButton } from '@mui/material'\r\nimport Search from './search/search'\r\nimport { getAuth, signOut } from '@firebase/auth'\r\nimport { useAuthState } from '../../utils/firebase'\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst StyledAppBar = styled(AppBar, {\r\n    shouldForwardProp: (prop) => prop !== 'open',\r\n})(({ theme, open }) => ({\r\n    transition: theme.transitions.create(['margin', 'width'], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    ...(open && {\r\n        width: `calc(100% - ${drawerWidth}px)`,\r\n        marginLeft: `${drawerWidth}px`,\r\n        transition: theme.transitions.create(['margin', 'width'], {\r\n            easing: theme.transitions.easing.easeOut,\r\n            duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n    }),\r\n}));\r\n\r\nexport default function Topbar({ papers, setActiveFile, handleDrawerOpen }) {\r\n    const [search, setSearch] = useState(false);\r\n\r\n    const handleSearchOpen = () => setSearch(true);\r\n    const handleSearchClose = () => setSearch(false);\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = useState(null);\r\n\r\n    const isMenuOpen = Boolean(anchorEl);\r\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n    const handleProfileMenuOpen = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleMobileMenuClose = () => {\r\n        setMobileMoreAnchorEl(null);\r\n    };\r\n\r\n    const handleMenuClose = () => {\r\n        setAnchorEl(null);\r\n        handleMobileMenuClose();\r\n    };\r\n\r\n    const handleMobileMenuOpen = (event) => {\r\n        setMobileMoreAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const menuId = 'primary-search-account-menu';\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            id={menuId}\r\n            keepMounted\r\n            transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            open={isMenuOpen}\r\n            onClose={handleMenuClose}\r\n        >\r\n            <MenuItem onClick={() => signOut(getAuth())}>Вийти</MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    const mobileMenuId = 'primary-search-account-menu-mobile';\r\n    const renderMobileMenu = (\r\n        <Menu\r\n            anchorEl={mobileMoreAnchorEl}\r\n            anchorOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            id={mobileMenuId}\r\n            keepMounted\r\n            transformOrigin={{\r\n                vertical: 'top',\r\n                horizontal: 'right',\r\n            }}\r\n            open={isMobileMenuOpen}\r\n            onClose={handleMobileMenuClose}\r\n        >\r\n            <MenuItem onClick={() => signOut(getAuth())}>\r\n                <IconButton\r\n                    size=\"large\"\r\n                    aria-label=\"account of current user\"\r\n                    aria-controls=\"primary-search-account-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <AccountCircle />\r\n                </IconButton>\r\n                <p>Вийти</p>\r\n            </MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <StyledAppBar color=\"transparent\" elevation={0} position=\"fixed\" >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        size=\"large\"\r\n                        edge=\"start\"\r\n                        color=\"inherit\"\r\n                        aria-label=\"open drawer\"\r\n                        sx={{ mr: 2 }}\r\n                        onClick={handleDrawerOpen}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n                    <Box sx={{ flexGrow: 1 }} />\r\n                    <Box sx={{ display: { xs: 'none', md: 'flex' } }}>\r\n                        <IconButton\r\n                            onClick={handleSearchOpen}\r\n                            size=\"large\"\r\n                            color=\"inherit\"\r\n                        >\r\n                            <SearchIcon />\r\n                        </IconButton>\r\n                        \r\n                        <IconButton\r\n                            size=\"large\"\r\n                            edge=\"end\"\r\n                            aria-label=\"account of current user\"\r\n                            aria-controls={menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleProfileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle />\r\n                        </IconButton>\r\n                    </Box>\r\n                    <Box sx={{ display: { xs: 'flex', md: 'none' } }}>\r\n                        <IconButton\r\n                            size=\"large\"\r\n                            aria-label=\"show more\"\r\n                            aria-controls={mobileMenuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleMobileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <MoreIcon />\r\n                        </IconButton>\r\n                    </Box>\r\n                </Toolbar>\r\n            </StyledAppBar>\r\n            {renderMobileMenu}\r\n            {renderMenu}\r\n            <Search papers={papers} search={search} setSearch={setSearch} handleSearchOpen={handleSearchOpen} handleSearchClose={handleSearchClose} setActiveFile={setActiveFile} />\r\n        </>\r\n    )\r\n}\r\n","import React, { useState, forwardRef, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport { styled } from '@mui/material/styles';\r\nimport Box from '@mui/material/Box';\r\nimport TreeItem, { treeItemClasses, useTreeItem } from '@mui/lab/TreeItem';\r\nimport Typography from '@mui/material/Typography';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport { useSpring, animated } from 'react-spring';\r\nimport Collapse from '@mui/material/Collapse';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction TransitionComponent(props) {\r\n    const style = useSpring({\r\n        from: {\r\n            opacity: 0,\r\n        },\r\n        to: {\r\n            opacity: props.in ? 1 : 0,\r\n        },\r\n    });\r\n\r\n    return (\r\n        <animated.div style={style}>\r\n            <Collapse {...props} />\r\n        </animated.div>\r\n    );\r\n}\r\n\r\nTransitionComponent.propTypes = {\r\n    /**\r\n     * Show the component; triggers the enter or exit states\r\n     */\r\n    in: PropTypes.bool,\r\n};\r\n\r\nconst StyledTreeItemRoot = styled(TreeItem)(({ theme }) => ({\r\n    [`& .${treeItemClasses.content}`]: {\r\n        // paddingRight: theme.spacing(1),\r\n        // paddingTop: theme.spacing(0.5),\r\n        // paddingBottom: theme.spacing(0.5),\r\n        fontWeight: theme.typography.fontWeightMedium,\r\n        color: theme.palette.text.main,\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.action.hover,\r\n        },\r\n        '&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused, &:hover.Mui-selected': {\r\n            backgroundColor: theme.palette.action.focus\r\n        },\r\n        [`& .${treeItemClasses.label}`]: {\r\n            fontWeight: 'inherit',\r\n            color: 'inherit',\r\n        },\r\n    },\r\n    [`& .${treeItemClasses.group}`]: {\r\n        marginLeft: 0,\r\n\r\n        [`& .${treeItemClasses.content}`]: {\r\n            paddingLeft: theme.spacing(4),\r\n        },\r\n    },\r\n}));\r\n\r\nconst CustomContent = forwardRef(function CustomContent(props, ref) {\r\n    const {\r\n        classes,\r\n        className,\r\n        label,\r\n        nodeId,\r\n        icon: iconProp,\r\n        expansionIcon,\r\n        displayIcon,\r\n        addPaper,\r\n        deletePaper,\r\n        expand,\r\n        labelIcon,\r\n        activeFile\r\n    } = props;\r\n\r\n    const {\r\n        disabled,\r\n        expanded,\r\n        selected,\r\n        focused,\r\n        handleExpansion,\r\n        handleSelection,\r\n        preventSelection,\r\n    } = useTreeItem(nodeId);\r\n\r\n    const icon = iconProp || expansionIcon || displayIcon;\r\n\r\n    const handleMouseDown = (event) => {\r\n        preventSelection(event);\r\n    };\r\n\r\n    const handleExpansionClick = (event) => {\r\n        handleExpansion(event);\r\n        expand();\r\n    };\r\n\r\n    const handleSelectionClick = (event) => {\r\n        handleSelection(event);\r\n    };\r\n\r\n    const [mouse, setMouse] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if(activeFile == nodeId) {\r\n            handleSelectionClick(nodeId);\r\n        }\r\n    }, [activeFile])\r\n\r\n    return (\r\n        <Box\r\n            className={clsx(className, classes.root, {\r\n                [classes.expanded]: expanded,\r\n                [classes.selected]: selected,\r\n                [classes.focused]: focused,\r\n                [classes.disabled]: disabled,\r\n            })}\r\n            onMouseDown={handleMouseDown}\r\n            ref={ref}\r\n            onMouseEnter={() => setMouse(true)} onMouseLeave={() => setMouse(false)}\r\n            sx={{ display: 'flex', alignItems: 'center', p: 0.5, pr: 0, }}  >\r\n            <div onClick={handleExpansionClick}>\r\n                <IconButton size=\"small\" >\r\n                    {icon}\r\n                </IconButton>\r\n            </div>\r\n            <Link to={`/${nodeId}`} onClick={handleSelectionClick} style={{ flexGrow: 1, py: 2, display: 'flex', alignItems: 'center', color: 'inherit', textDecoration: 'none' }}>\r\n                    <Box component={labelIcon} sx={{ mr: 1, color: '#333', height: 60 }} />\r\n                    <Typography variant=\"body1\" >\r\n                        {label}\r\n                    </Typography>\r\n            </Link>\r\n\r\n            {mouse && (\r\n                <Box sx={{ display: 'block' }} >\r\n                    {nodeId !== '1' && nodeId !== 'tasks' ? (<IconButton size=\"small\" onClick={deletePaper} >\r\n                        <DeleteIcon />\r\n                    </IconButton>) : null}\r\n\r\n                    {nodeId !== 'tasks' ? (<IconButton size=\"small\" onClick={addPaper} >\r\n                        <AddIcon />\r\n                    </IconButton>) : null}\r\n                </Box>\r\n            )}\r\n        </Box>\r\n    );\r\n});\r\n\r\nconst StyledTreeItem = (props) => {\r\n    return (<StyledTreeItemRoot TransitionComponent={TransitionComponent} ContentComponent={CustomContent}  {...props} />);\r\n}\r\n\r\n\r\nexport default StyledTreeItem;","import React from 'react'\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport Button from '@mui/material/Button';\r\n\r\nexport default function DialogComponent({ openDialog, setOpenDialog, deletePaper, lastClickedDelete }) {\r\n    const handleClose = () => {\r\n        setOpenDialog(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                open={openDialog}\r\n                onClose={handleClose}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">\r\n                    Ви впевнені, що хочете видалити файл?\r\n                </DialogTitle>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose}>Ні</Button>\r\n                    <Button onClick={() => { handleClose(); deletePaper(lastClickedDelete) }} autoFocus>\r\n                        Так\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react';\r\nimport { Drawer, IconButton } from '@mui/material';\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport TreeView from '@mui/lab/TreeView';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\r\nimport ChevronRightIcon from '@mui/icons-material/ChevronRight';\r\nimport StyledTreeItem from './styled-tree-item';\r\nimport DialogComponent from './dialog';\r\nimport TaskAltIcon from '@mui/icons-material/TaskAlt';\r\nimport NotesIcon from '@mui/icons-material/Notes';\r\n\r\nconst minDrawerWidth = 180;\r\nconst maxDrawerWidth = 500;\r\n\r\nconst DrawerHeader = styled('div')(({ theme }) => ({\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end'\r\n}));\r\n\r\nconst DragDiv = styled('div')(({ theme }) => ({\r\n    width: \"5px\",\r\n    cursor: \"ew-resize\",\r\n    padding: \"4px 0 0\",\r\n    borderTop: \"1px solid #ddd\",\r\n    position: \"absolute\",\r\n    top: 0,\r\n    right: 0,\r\n    bottom: 0,\r\n    zIndex: 100,\r\n    '&:hover': {\r\n        backgroundColor: \"#ddd\",\r\n        transition: \"all 0.4s ease\"\r\n    },\r\n}))\r\n\r\nconst Sidebar = ({ \r\n        papers, \r\n        addPaper, \r\n        deletePaper, \r\n        activeFile,\r\n        setActiveFile, \r\n        open, \r\n        handleDrawerClose, \r\n        drawerWidth, \r\n        setDrawerWidth,\r\n        expanded,\r\n        handleExpandClick\r\n    }) => {\r\n    const theme = useTheme();\r\n\r\n    const handleMouseDown = e => {\r\n        document.addEventListener(\"mouseup\", handleMouseUp, true);\r\n        document.addEventListener(\"mousemove\", handleMouseMove, true);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        document.removeEventListener(\"mouseup\", handleMouseUp, true);\r\n        document.removeEventListener(\"mousemove\", handleMouseMove, true);\r\n    };\r\n\r\n    const handleMouseMove = (e => {\r\n        const newWidth = e.clientX;\r\n        if (newWidth > minDrawerWidth && newWidth < maxDrawerWidth) {\r\n            setDrawerWidth(newWidth);\r\n            localStorage.setItem(\"drawerWidth\", JSON.stringify(newWidth))\r\n        }\r\n    });\r\n\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n\r\n    const handleClickOpen = () => {\r\n        setOpenDialog(true);\r\n    };\r\n\r\n    const [lastClickedDelete, setLastClickedDelete] = useState(false)\r\n\r\n    const elements = (treeItems) => {\r\n        return treeItems ? treeItems.map(treeItemData => {\r\n            const { id } = treeItemData;\r\n            const icon = treeItemData.id !== 1 ? null : NotesIcon;\r\n            return (\r\n                <StyledTreeItem\r\n                    key={id}\r\n                    nodeId={`${id}`}\r\n                    label={treeItemData.title}\r\n                    ContentProps={{\r\n                        activeFile: activeFile,\r\n                        addPaper: () => addPaper(treeItemData.id), \r\n                        deletePaper: () => {\r\n                            setLastClickedDelete(id)\r\n                            handleClickOpen();\r\n                        },\r\n                        expand: () => handleExpandClick(`${treeItemData.id}`),\r\n                        labelIcon: icon,\r\n                    }}\r\n                >\r\n                    {treeItemData.children && treeItemData.children.length !== 0 ?\r\n                        elements(treeItemData.children) : null}\r\n                </StyledTreeItem>\r\n            );\r\n        }) : null\r\n        \r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <Drawer\r\n                sx={{\r\n                    width: drawerWidth,\r\n                    flexShrink: 0,\r\n                    transition: \"all 0.1s ease-out\",\r\n                    userSelect: \"none\",\r\n                    [`& .MuiDrawer-paper`]: { width: drawerWidth, boxSizing: 'border-box', transition: \"all 0.1s ease-out\" },\r\n                }}\r\n                variant=\"persistent\"\r\n                anchor=\"left\"\r\n                open={open}\r\n            >\r\n                <DragDiv onMouseDown={e => handleMouseDown(e)} />\r\n                <DrawerHeader>\r\n                    <IconButton onClick={handleDrawerClose}>\r\n                        {theme.direction === 'ltr' ? <ChevronLeftIcon /> : <ChevronRightIcon />}\r\n                    </IconButton>\r\n                </DrawerHeader>\r\n                <TreeView\r\n                    aria-label=\"multi-select\"\r\n                    defaultCollapseIcon={<ExpandMoreIcon />}\r\n                    defaultExpandIcon={<ChevronRightIcon />}\r\n                    multiSelect\r\n                    expanded={expanded}\r\n                    sx={{ overflowY: 'auto', my: 3 }}\r\n                    onNodeSelect={(event, nodeIds) => setActiveFile(nodeIds[0])}\r\n                >\r\n                    <StyledTreeItem nodeId=\"tasks\" label=\"Задачі\" ContentProps={{ labelIcon: TaskAltIcon }} />\r\n                    {elements(papers)}\r\n                </TreeView>\r\n            </Drawer>\r\n            <DialogComponent\r\n                openDialog={openDialog}\r\n                setOpenDialog={setOpenDialog}\r\n                deletePaper={deletePaper}\r\n                lastClickedDelete={lastClickedDelete}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Sidebar;","import { getWeek } from 'date-fns'\r\n\r\nexport default function CheckDate(newValue) {\r\n    if(newValue === null) {\r\n        return 'дата не назначена'\r\n    }  \r\n    else if (getWeek(new Date(newValue)) === getWeek(new Date())) {\r\n        if (new Date(newValue).toLocaleDateString('uk-UA', { weekday: 'long' }) === new Date().toLocaleDateString('uk-UA', { weekday: 'long' })) {\r\n            return 'сьогодні'\r\n        } else if (new Date(newValue).getDay() === new Date().getDay() + 1) {\r\n            return 'завтра'\r\n        }\r\n        else {\r\n            return new Date(newValue).toLocaleDateString('uk-UA', { weekday: 'long' })\r\n        }\r\n    } else {\r\n        return new Date(newValue).toLocaleDateString('uk-UA', { weekday: 'short', month: 'long', day: 'numeric' })\r\n    }\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { NodeViewWrapper, NodeViewContent } from '@tiptap/react'\r\nimport Checkbox from '@mui/material/Checkbox'\r\nimport Typography from '@mui/material/Typography'\r\nimport Box from '@mui/material/Box'\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns'\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider'\r\nimport DatePicker from '@mui/lab/DatePicker'\r\nimport { getWeek } from 'date-fns'\r\nimport { areDayPropsEqual } from '@mui/lab/PickersDay/PickersDay'\r\nimport CheckDate from '../../../utils/check-date'\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default props => {\r\n\r\n  const handleCheckBox = (e) => {\r\n    props.updateAttributes({\r\n      checkbox: e.target.checked,\r\n    })\r\n  }\r\n\r\n  const [showedDate, setShowedDate] = useState()\r\n  const [id, setId] = useState()\r\n\r\n  const [rerender, setRerender] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    const task = props.extension.options.tasks.filter(task => task.id === props.node.attrs.id)\r\n    if (task[0]) {\r\n      const { date, checkbox, content } = task[0]\r\n      props.updateAttributes({\r\n        date: date,\r\n        checkbox: checkbox,\r\n        content: content\r\n      })\r\n      setShowedDate(CheckDate(date))\r\n    }\r\n  }, [id])\r\n\r\n  useEffect(() => {\r\n    setShowedDate(CheckDate(props.node.attrs.date))\r\n  }, [])\r\n\r\n  const handleDatePicker = (newValue) => {\r\n    props.updateAttributes({\r\n      date: new Date(newValue)\r\n    })\r\n    // setShowedDate(new Date(newValue).toLocaleDateString('uk-UA', { weekday: 'short', month: 'long', day: 'numeric' }));\r\n    setShowedDate(CheckDate(newValue))\r\n    // setShowedDate(getWeek(newValue));\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(props.node.attrs.id !== id) {\r\n      setId(props.node.attrs.id)\r\n    }\r\n\r\n    props.extension.storage.object = {\r\n      id: props.node.attrs.id,\r\n      checkbox: props.node.attrs.checkbox,\r\n      date: new Date(props.node.attrs.date),\r\n      content: props.node.content.content[0].content.content[0] ? props.node.content.content[0].content.content[0].text : '',\r\n      delete: !props.node.content.content[0].content.content[0] ? true : false\r\n    };\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <NodeViewWrapper className=\"taskItem\">\r\n        <Box sx={{ display: 'flex' }}>\r\n          <Checkbox checked={props.node.attrs.checkbox} onChange={handleCheckBox} contentEditable={false} inputProps={{ 'aria-label': 'controlled' }} />\r\n          <NodeViewContent className=\"content\"/>\r\n        </Box>\r\n        <Box contentEditable={false}>\r\n          <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n            <DatePicker\r\n              label=\"Date\"\r\n              value={props.node.attrs.date}\r\n              onChange={(newValue) => handleDatePicker(newValue)}\r\n              renderInput={({ inputRef, inputProps, InputProps }) => (\r\n                <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                  <Box ref={inputRef} {...inputProps} />\r\n                  <Typography fontWeight=\"bold\">{showedDate}</Typography>\r\n                  {InputProps?.endAdornment}\r\n                </Box>\r\n              )}\r\n            ></DatePicker>\r\n          </LocalizationProvider>\r\n        </Box>\r\n\r\n      </NodeViewWrapper>\r\n    </>\r\n  )\r\n}","import { Node, mergeAttributes, wrappingInputRule } from '@tiptap/core'\r\nimport { ReactNodeViewRenderer } from '@tiptap/react'\r\nimport Component from './editor-task-item-component'\r\nimport { Plugin } from 'prosemirror-state'\r\nimport uuid from 'react-uuid'\r\n\r\nexport const inputRegex = /^\\s*(\\[([ |x])\\])\\s$/\r\n\r\nexport default Node.create({\r\n    name: 'taskItem',\r\n\r\n    group: 'block',\r\n\r\n    addAttributes() {\r\n        return {\r\n            checkbox: {\r\n                default: false,\r\n            },\r\n            date: {\r\n                default: new Date(),\r\n            },\r\n            content: {\r\n                default: '',\r\n            },\r\n            delete: {\r\n                default: false,\r\n            },\r\n            tasks: {\r\n                default: this.options.tasks\r\n            },\r\n            id: {\r\n                default: null,\r\n                rendered: false,\r\n                keepOnSplit: false,\r\n            },\r\n\r\n        }\r\n    },\r\n\r\n    addStorage() {\r\n        return {\r\n            object: {},\r\n        }\r\n    },\r\n\r\n    content() {\r\n        return 'paragraph+'\r\n    },\r\n\r\n    defining: true,\r\n\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'taskItem',\r\n            },\r\n        ]\r\n    },\r\n\r\n    renderHTML({ node, HTMLAttributes }) {\r\n        return ['taskItem', mergeAttributes(HTMLAttributes), 0]\r\n    },\r\n\r\n    addKeyboardShortcuts() {\r\n        const shortcuts = {\r\n            Enter: () => this.editor.commands.splitListItem('taskItem'),\r\n            'Shift-Tab': () => this.editor.commands.liftListItem('taskItem'),\r\n        }\r\n\r\n        if (!this.options.nested) {\r\n            return shortcuts\r\n        }\r\n\r\n        return {\r\n            ...shortcuts,\r\n            Tab: () => this.editor.commands.sinkListItem('taskItem'),\r\n        }\r\n    },\r\n\r\n    addNodeView() {\r\n        return ReactNodeViewRenderer(Component)\r\n    },\r\n\r\n    addInputRules() {\r\n        return [\r\n            wrappingInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n                getAttributes: match => ({\r\n                    checked: match[match.length - 1] === 'x',\r\n                }),\r\n            }),\r\n        ]\r\n    },\r\n\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            new Plugin({\r\n                appendTransaction: (_transactions, oldState, newState) => {\r\n                    // no changes\r\n                    if (newState.doc === oldState.doc) {\r\n                        return\r\n                    }\r\n                    const tr = newState.tr\r\n\r\n                    newState.doc.descendants((node, pos, parent) => {\r\n                        if (\r\n                            node.isBlock &&\r\n                            parent === newState.doc &&\r\n                            !node.attrs.id && node.attrs.content !== 0\r\n                        ) {\r\n                            tr.setNodeMarkup(pos, undefined, {\r\n                                ...node.attrs,\r\n                                id: uuid(),\r\n                            })\r\n                        }\r\n                    })\r\n\r\n                    return tr\r\n                },\r\n            }),\r\n        ]\r\n    },\r\n})","import React from 'react'\r\nimport { BubbleMenu } from '@tiptap/react'\r\nimport { styled } from '@mui/material/styles';\r\nimport FormatBoldIcon from '@mui/icons-material/FormatBold';\r\nimport FormatItalicIcon from '@mui/icons-material/FormatItalic';\r\n// import CodeIcon from '@mui/icons-material/Code';\r\nimport FormatUnderlinedIcon from '@mui/icons-material/FormatUnderlined';\r\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\r\nimport FormatQuoteIcon from '@mui/icons-material/FormatQuote';\r\nimport DoneIcon from '@mui/icons-material/Done';\r\nimport FormatAlignLeftIcon from '@mui/icons-material/FormatAlignLeft';\r\nimport FormatAlignCenterIcon from '@mui/icons-material/FormatAlignCenter';\r\nimport FormatAlignRightIcon from '@mui/icons-material/FormatAlignRight';\r\n// import FormatAlignJustifyIcon from '@mui/icons-material/FormatAlignJustify';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport ToggleButtonGroup from '@mui/material/ToggleButtonGroup';\r\nimport Paper from '@mui/material/Paper';\r\nimport Divider from '@mui/material/Divider';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nconst StyledToggleButtonGroup = styled(ToggleButtonGroup)(({ theme }) => ({\r\n    '& .MuiToggleButtonGroup-grouped': {\r\n        margin: theme.spacing(0.5),\r\n        border: 0,\r\n        '&.Mui-disabled': {\r\n            border: 0,\r\n        },\r\n        '&:not(:first-of-type)': {\r\n            borderRadius: theme.shape.borderRadius,\r\n        },\r\n        '&:first-of-type': {\r\n            borderRadius: theme.shape.borderRadius,\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function BubbleMenuComponent({ editor }) {\r\n    return (\r\n        <>\r\n            {editor && <BubbleMenu className=\"bubble-menu\" tippyOptions={{ duration: 100, maxWidth: 'none' }} editor={editor}>\r\n                <Paper\r\n                    elevation={0}\r\n                    sx={{\r\n                        display: 'flex',\r\n                        border: '1px solid #ddd',\r\n                        width: '100%'\r\n\r\n                    }}\r\n                >\r\n                    <StyledToggleButtonGroup\r\n                        aria-label=\"text formatting\"\r\n                        size=\"small\"\r\n                        sx={{ backgroundColor: 'white' }}\r\n                    >\r\n                        <ToggleButton value=\"bold\" selected={editor.isActive('bold')} aria-label=\"bold\" onClick={() => editor.chain().focus().toggleBold().run()}>\r\n                            <FormatBoldIcon />\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"italic\" selected={editor.isActive('italic')} aria-label=\"italic\" onClick={() => editor.chain().focus().toggleItalic().run()}>\r\n                            <FormatItalicIcon />\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"underline\" selected={editor.isActive('underline')} aria-label=\"underline\" onClick={() => editor.chain().focus().toggleUnderline().run()}>\r\n                            <FormatUnderlinedIcon />\r\n                        </ToggleButton>\r\n                        {/* <ToggleButton value=\"code\" selected={editor.isActive('code')} aria-label=\"code\" onClick={() => editor.chain().focus().toggleCode().run()}>\r\n                            <CodeIcon />\r\n                        </ToggleButton> */}\r\n                    </StyledToggleButtonGroup>\r\n                    <Divider flexItem orientation=\"vertical\" sx={{ mx: 0.5, my: 1 }} />\r\n                    <StyledToggleButtonGroup\r\n                        aria-label=\"text formatting\"\r\n                        size=\"small\"\r\n                        sx={{ backgroundColor: 'white' }}\r\n                    >\r\n                        <ToggleButton value=\"h1\" selected={editor.isActive('heading', { level: 1 })} aria-label=\"h1\" onClick={() => editor.isActive('heading', { level: 1 })  ? editor.chain().focus().setParagraph().run() : editor.chain().focus().setHeading({ level: 1 }).run()}>\r\n                            <Typography fontWeight=\"bold\" >H1</Typography>\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"h2\" selected={editor.isActive('heading', { level: 2 })} aria-label=\"h2\" onClick={() => editor.isActive('heading', { level: 2 })  ? editor.chain().focus().setParagraph().run() : editor.chain().focus().setHeading({ level: 2 }).run()}>\r\n                            <Typography fontWeight=\"bold\" >H2</Typography>\r\n                        </ToggleButton>\r\n                    </StyledToggleButtonGroup>\r\n                    <Divider flexItem orientation=\"vertical\" sx={{ mx: 0.5, my: 1 }} />\r\n                    <StyledToggleButtonGroup\r\n                        aria-label=\"text formatting\"\r\n                        size=\"small\"\r\n                        sx={{ backgroundColor: 'white' }}\r\n                    >\r\n                        <ToggleButton value=\"bulletList\" selected={editor.isActive('bulletList')} aria-label=\"bold\" onClick={() => editor.chain().focus().toggleBulletList().run()}>\r\n                            <FormatListBulletedIcon />\r\n                        </ToggleButton>\r\n                        {/* <ToggleButton value=\"taskList\" selected={editor.isActive('taskList')} aria-label=\"bold\" onClick={() => editor.chain().focus().toggleTaskList().run()}>\r\n                            <DoneIcon />\r\n                        </ToggleButton> */}\r\n                        <ToggleButton value=\"blockquote\" selected={editor.isActive('blockquote')} aria-label=\"bold\" onClick={() => editor.chain().focus().toggleBlockquote().run()}>\r\n                            <FormatQuoteIcon />\r\n                        </ToggleButton>\r\n                    </StyledToggleButtonGroup>\r\n                    <Divider flexItem orientation=\"vertical\" sx={{ mx: 0.5, my: 1 }} />\r\n                    <StyledToggleButtonGroup\r\n                        aria-label=\"text formatting\"\r\n                        size=\"small\"\r\n                        sx={{ backgroundColor: 'white' }}\r\n                    >\r\n                        <ToggleButton value=\"left\" selected={editor.isActive({ textAlign: 'left' })} aria-label=\"bold\" onClick={() => editor.chain().focus().setTextAlign('left').run()}>\r\n                            <FormatAlignLeftIcon />\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"center\" selected={editor.isActive({ textAlign: 'center' })} aria-label=\"bold\" onClick={() => editor.chain().focus().setTextAlign('center').run()}>\r\n                            <FormatAlignCenterIcon />\r\n                        </ToggleButton>\r\n                        <ToggleButton value=\"right\" selected={editor.isActive({ textAlign: 'right' })} aria-label=\"bold\" onClick={() => editor.chain().focus().setTextAlign('right').run()}>\r\n                            <FormatAlignRightIcon />\r\n                        </ToggleButton>\r\n                    </StyledToggleButtonGroup>\r\n                </Paper>\r\n            </BubbleMenu>}\r\n        </> \r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Box } from '@mui/system'\r\nimport { useEditor, EditorContent } from '@tiptap/react'\r\nimport Document from '@tiptap/extension-document'\r\nimport StarterKit from '@tiptap/starter-kit'\r\nimport Placeholder from '@tiptap/extension-placeholder'\r\nimport Dropcursor from '@tiptap/extension-dropcursor'\r\nimport TextAlign from '@tiptap/extension-text-align'\r\nimport Underline from '@tiptap/extension-underline'\r\nimport TaskList from '@tiptap/extension-task-list'\r\nimport { Toolbar, Typography } from '@mui/material'\r\nimport taskItem from '../components/editor/editor-task-item/editor-task-item-extension'\r\nimport BubbleMenuComponent from '../components/editor/bubble-menu'\r\nimport '../styles/editor.css'\r\n\r\nconst CustomDocument = Document.extend({\r\n    content: 'heading block*',\r\n})\r\n\r\nconst Editor = ({ getActiveFile, onUpdateNote, open, drawerWidth, onUpdateTask, onDeleteTask, saveData, tasks }) => {\r\n\r\n    const [id, setId] = useState();\r\n    const [content, setContent] = useState()\r\n\r\n    const editor = useEditor({\r\n        autofocus: true,\r\n        extensions: [\r\n            CustomDocument,\r\n            StarterKit.configure({\r\n                document: false,\r\n            }),\r\n            Dropcursor.configure({\r\n                width: 2,\r\n            }),\r\n            TextAlign.configure({\r\n                types: ['heading', 'paragraph'],\r\n                alignments: ['left', 'center', 'right', 'justify']\r\n            }),\r\n            Underline,\r\n            taskItem.configure({\r\n                tasks: tasks,\r\n            }),\r\n            TaskList,\r\n            Placeholder.configure({\r\n                placeholder: ({ node }) => {\r\n                    if (node.type.name === 'heading') {\r\n                        return 'Без заголовка'\r\n                    }\r\n\r\n                    return 'Висловіть свої думки'\r\n                },\r\n            }),\r\n        ],\r\n        content: getActiveFile.text,\r\n        onBlur({ editor }) {\r\n            setContent({\r\n                title: editor.view.dom.children[0].innerText.length !== 1 ? editor.view.dom.children[0].innerText : 'Untitled',\r\n                text: editor.getJSON(),\r\n                rawText: editor.getText()\r\n            })\r\n        },\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (content) {\r\n            onUpdateNote({\r\n                id: getActiveFile.id,\r\n                children: getActiveFile.children,\r\n                ...content\r\n            })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [content])\r\n\r\n    useEffect(() => {\r\n        if (getActiveFile) {\r\n            if (getActiveFile.id !== id) {\r\n                setId(getActiveFile.id);\r\n                try {\r\n                    editor.commands.setContent(getActiveFile.text, false);\r\n                    editor.commands.focus();\r\n                } catch (e) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }, [getActiveFile, editor, id]);\r\n\r\n    const [lastTask, setLastTask] = useState();\r\n\r\n    useEffect(() => {\r\n        if (editor && lastTask !== editor.storage.taskItem.object) {\r\n            if (editor.storage.taskItem.object.delete) {\r\n                onDeleteTask({ ...editor.storage.taskItem.object, fileId: getActiveFile.id })\r\n            } else {\r\n                onUpdateTask({ ...editor.storage.taskItem.object, fileId: getActiveFile.id })\r\n            }\r\n\r\n            setLastTask(editor.storage.taskItem.object)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [editor, lastTask, onUpdateTask])\r\n\r\n    const check = getActiveFile && getActiveFile.id !== 1 ? (\r\n        <>\r\n            <Box open={open} sx={{ py: 12, px: 20, mr: !open ? `${drawerWidth}px` : '0px', width: '100%' }} className='editarea'><Toolbar />\r\n                <EditorContent editor={editor}>\r\n                    <BubbleMenuComponent editor={editor} />\r\n                </EditorContent>\r\n\r\n            </Box>\r\n        </>\r\n    ) : (\r\n        <>\r\n            <Box position='absolute' display='flex' justifyContent='center' alignItems='center' height='80vh' width='100%'>\r\n                <Toolbar />\r\n                <Typography variant='h4' align='center' fontWeight='bold' >Немає відкритих файлів</Typography>\r\n            </Box>\r\n        </>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {check}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Editor;","import { Extension } from '@tiptap/core'\r\nimport { Plugin, PluginKey } from 'prosemirror-state'\r\n\r\nexport const OneLine = Extension.create({\r\n    name: 'OneLine',\r\n\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('OneLine'),\r\n                props: {\r\n                    handleKeyDown: (view, event) => {\r\n                        if (event.key === 'Enter' && !event.shiftKey) {\r\n                            // do something\r\n                            return true\r\n                        }\r\n\r\n                        return false\r\n                    },\r\n                },\r\n            }),\r\n        ]\r\n    },\r\n})","import React, { useState, useEffect } from 'react'\r\nimport Box from '@mui/material/Box'\r\nimport { useEditor, EditorContent } from '@tiptap/react'\r\nimport StarterKit from '@tiptap/starter-kit'\r\nimport Placeholder from '@tiptap/extension-placeholder'\r\nimport Typography from '@mui/material/Typography'\r\nimport Checkbox from '@mui/material/Checkbox'\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns'\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider'\r\nimport DatePicker from '@mui/lab/DatePicker'\r\nimport CheckDate from '../../utils/check-date'\r\nimport { OneLine } from './one-line-extension'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function TaskItem({ task, \r\n    onUpdateTask, \r\n    onDeleteTask,\r\n    title = null,\r\n    id = null,\r\n    setActiveFile = null\r\n }) {\r\n    const [taskInfo, setTaskInfo] = useState(task)\r\n    const [taskContent, setTaskContent] = useState(task.content)\r\n    const [showedDate, setShowedDate] = useState()\r\n\r\n    const handleCheckBox = (e) => {\r\n        setTaskInfo({\r\n            ...taskInfo,\r\n            checkbox: e.target.checked\r\n        })\r\n    }\r\n\r\n    const handleDatePicker = (newValue) => {\r\n        setTaskInfo({\r\n            ...taskInfo,\r\n            date: new Date(newValue)\r\n        })\r\n\r\n        setShowedDate(CheckDate(newValue))\r\n    }\r\n\r\n    const handleDeleteTask = (e) => {\r\n        if(e.key === 'Backspace') {\r\n            if(taskContent) {\r\n                if(taskContent.length === 0) {\r\n                    onDeleteTask({...taskInfo, content: taskContent})\r\n                }\r\n                \r\n            }   else {\r\n                onDeleteTask({...taskInfo, content: taskContent})\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        onUpdateTask({...taskInfo, content: taskContent})\r\n    }, [taskInfo])\r\n    \r\n\r\n    useEffect(() => {\r\n        setShowedDate(CheckDate(taskInfo.date))\r\n    }, [])\r\n\r\n    const editor = useEditor({\r\n        autofocus: true,\r\n        extensions: [\r\n            StarterKit,\r\n            Placeholder.configure({\r\n                placeholder: ({ node }) => {\r\n                    return 'Напишіть задачу'\r\n                },\r\n            }),\r\n            OneLine,\r\n        ],\r\n        content: task.content,\r\n        onUpdate({ editor }) {\r\n            setTaskContent(editor.getText())\r\n        },\r\n    })\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex', flexDirection: 'row', alignItems: 'center', width: '100%', justifyContent: 'space-between' }}>\r\n            <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                <Checkbox checked={taskInfo.checked} onChange={handleCheckBox} />\r\n                {task.fileId ? <Typography>{task.content}</Typography> : <EditorContent editor={editor} onKeyDown={handleDeleteTask} onBlur={() => onUpdateTask({...taskInfo, content: taskContent})} />}\r\n            </Box>\r\n\r\n            <Box sx={{ display: 'flex' }}>\r\n                {title && id && \r\n                <Box sx={{ mr: 2 }}>\r\n                    <Link to={`/${id}`} onClick={() => setActiveFile(id)} style={{ color: 'inherit', textDecoration: 'none', textDecorationLine: 'underline' }} >\r\n                        з файлу {title}\r\n                    </Link>\r\n            </Box>\r\n                }\r\n                <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                    <DatePicker\r\n                        label=\"Date\"\r\n                        value={taskInfo.date}\r\n                        onChange={(newValue) => handleDatePicker(newValue)}\r\n                        renderInput={({ inputRef, inputProps, InputProps }) => (\r\n                            <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                                <Box ref={inputRef} {...inputProps} />\r\n                                {InputProps?.endAdornment}\r\n                            </Box>\r\n                        )}\r\n                    ></DatePicker>\r\n                </LocalizationProvider>\r\n            </Box>\r\n        </Box>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Box from '@mui/material/Box'\r\nimport TaskItem from '../components/task-item/task-item'\r\nimport Add from '@mui/icons-material/Add'\r\nimport Typography from '@mui/material/Typography'\r\nimport Button from '@mui/material/Button'\r\nimport Toolbar from '@mui/material/Toolbar'\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\r\nimport uuid from 'react-uuid'\r\nimport CheckDate from '../utils/check-date'\r\n\r\nconst theme = createTheme({\r\n    palette: {\r\n        button: {\r\n            main: '#666666',\r\n        },\r\n    },\r\n});\r\n\r\nexport default function Tasks({\r\n    tasks,\r\n    onUpdateTask,\r\n    onDeleteTask,\r\n    drawerWidth,\r\n    open,\r\n    getFileId,\r\n    setActiveFile\r\n}) {\r\n\r\n    const handleAddTask = () => {\r\n        onUpdateTask({\r\n            checkbox: false,\r\n            id: uuid(),\r\n            content: null,\r\n            date: null,\r\n            fileId: false,\r\n        })\r\n    }\r\n\r\n    function compareValues(key, order = 'asc') {\r\n        return function innerSort(a, b) {\r\n            if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\r\n                // property doesn't exist on either object\r\n                return 0;\r\n            }\r\n\r\n            const varA = (typeof a[key] === 'string')\r\n                ? a[key].toUpperCase() : a[key];\r\n            const varB = (typeof b[key] === 'string')\r\n                ? b[key].toUpperCase() : b[key];\r\n\r\n            let comparison = 0;\r\n            if (varA > varB) {\r\n                comparison = 1;\r\n            } else if (varA < varB) {\r\n                comparison = -1;\r\n            }\r\n            return (\r\n                (order === 'desc') ? (comparison * -1) : comparison\r\n            );\r\n        };\r\n    }\r\n\r\n    const dates = [...new Set(tasks.sort(compareValues('date')).map(task => task.date ? CheckDate(task.date) : null))]\r\n\r\n    const renderedTasks = () => {\r\n        return dates.map(date => {\r\n            if (date) {\r\n                const tasksElements = tasks.filter(task => task.date !== null).map(\r\n                    task => {\r\n                        const tranformedDate = CheckDate(task.date)\r\n                        if (task.id && date === tranformedDate) {\r\n                            if (task.fileId) {\r\n                                const { title, id } = getFileId(task.fileId)\r\n                                return (\r\n                                    <TaskItem key={task.id} title={title} id={id} setActiveFile={setActiveFile} task={task} onUpdateTask={onUpdateTask} onDeleteTask={onDeleteTask} />\r\n                                )\r\n                            }\r\n                            return (\r\n                                <TaskItem key={task.id} task={task} onUpdateTask={onUpdateTask} onDeleteTask={onDeleteTask} />\r\n                            )\r\n                        }\r\n                    }\r\n                )\r\n\r\n                return (\r\n                    <Box>\r\n                        <Typography variant=\"h6\" fontWeight=\"bold\" > {date.charAt(0).toUpperCase() + date.slice(1)}</Typography>\r\n                        {tasksElements}\r\n                    </Box>\r\n                )\r\n            }\r\n        })\r\n    }\r\n\r\n    const renderedTasksWithOutDate = () => {\r\n        const tasksElements = tasks.filter(task => task.date === null).map(\r\n            task => {\r\n                if (task.id) {\r\n                    if (task.fileId) {\r\n                        const { title, id } = getFileId(task.fileId)\r\n                        return (\r\n                            <TaskItem key={task.id} title={title} id={id} setActiveFile={setActiveFile} task={task} onUpdateTask={onUpdateTask} onDeleteTask={onDeleteTask} />\r\n                        )\r\n                    }\r\n                    return (\r\n                        <TaskItem key={task.id} task={task} onUpdateTask={onUpdateTask} onDeleteTask={onDeleteTask} />\r\n                    )\r\n                }\r\n            }\r\n        )\r\n\r\n        return (\r\n            <Box>\r\n                <Typography variant=\"h6\" fontWeight=\"bold\" >Без дати</Typography>\r\n                {tasksElements}\r\n            </Box>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Box open={open} sx={{ py: 12, px: 24, mr: !open ? `${drawerWidth}px` : '0px', width: '100%' }} className='editarea'><Toolbar />\r\n                <Typography variant=\"h4\" fontWeight=\"bold\" sx={{ mb: 3 }} >Задачі</Typography>\r\n                {renderedTasks()}\r\n                {renderedTasksWithOutDate()}\r\n                <Button onClick={handleAddTask} variant=\"outlined\" startIcon={<Add />} color=\"button\" sx={{ mt: 1.5, textTransform: 'none' }} >\r\n                    Додати задачу\r\n                </Button>\r\n            </Box >\r\n        </ThemeProvider>\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Box } from '@mui/system'\r\nimport { CssBaseline } from '@mui/material'\r\nimport Snackbar from '@mui/material/Snackbar'\r\nimport IconButton from '@mui/material/IconButton'\r\nimport CloseIcon from '@mui/icons-material/Close'\r\nimport Topbar from '../components/topbar/topbar'\r\nimport Sidebar from '../components/sidebar/sidebar'\r\nimport Editor from './editor'\r\nimport Tasks from './tasks';\r\nimport { useAuthState } from '../utils/firebase'\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore'\r\nimport { db } from '../utils/firebase'\r\nimport uuid from 'react-uuid'\r\nimport useEventListener from '../hooks/event-listener';\r\n\r\nexport default function Main({ showEditor = false, showTasks = false }) {\r\n    const { user } = useAuthState()\r\n\r\n    const [papers, setPaper] = useState();\r\n    const [tasks, setTasks] = useState([]);\r\n\r\n    const [dataGetted, setDataGetted] = useState(false);\r\n\r\n    const getDocument = async () => {\r\n        const docSnap = await getDoc(doc(db, `users/${user.uid}`))\r\n        if (docSnap.exists()) {\r\n            console.log(\"Document data:\", JSON.parse(docSnap.data().papers));\r\n            setPaper(JSON.parse(docSnap.data().papers))\r\n            setTasks(JSON.parse(docSnap.data().tasks))\r\n        } else {\r\n            // doc.data() will be undefined in this case\r\n            console.log(\"No such document!\");\r\n        }\r\n        setDataGetted(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getDocument()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const [open, setOpen] = useState(localStorage.open ? JSON.parse(localStorage.open) : true);\r\n\r\n    const handleDrawerOpen = () => {\r\n        setOpen(true);\r\n        localStorage.setItem(\"open\", JSON.stringify(true))\r\n    };\r\n\r\n    const handleDrawerClose = () => {\r\n        setOpen(false);\r\n        localStorage.setItem(\"open\", JSON.stringify(false))\r\n    };\r\n\r\n    const [activeFile, setActiveFile] = useState(1);\r\n\r\n    const getActiveFile = (data = papers, id = activeFile) => {\r\n\r\n        let check = false\r\n        if (Array.isArray(data)) {\r\n            data.forEach(dataItem => {\r\n                if (dataItem.id === id) {\r\n                    check = dataItem\r\n                } else if (dataItem.children && dataItem.children.length !== 0) {\r\n                    check = getActiveFile(dataItem.children, id);\r\n                }\r\n            })\r\n        }\r\n        if (!check) {\r\n            return false\r\n        } else {\r\n            return check;\r\n        }\r\n    }\r\n\r\n    const getFileId = (id) => {\r\n        return getActiveFile(papers, id)\r\n    }\r\n\r\n    const onUpdateNote = (updatedNote, data = papers) => {\r\n        const updatedDataArr = data.map(dataItem => {\r\n            if (dataItem.id === updatedNote.id) {\r\n                return updatedNote;\r\n            } else if (dataItem.children && dataItem.children.length !== 0) {\r\n                return {\r\n                    ...dataItem,\r\n                    children: onUpdateNote(updatedNote, dataItem.children)\r\n                }\r\n\r\n            } else {\r\n                return dataItem;\r\n            }\r\n        });\r\n\r\n        if (data === papers) {\r\n            setPaper(updatedDataArr)\r\n        } else {\r\n            return updatedDataArr\r\n        }\r\n    }\r\n\r\n    const [expanded, setExpanded] = useState(localStorage.expanded ? JSON.parse(localStorage.expanded) : []);\r\n\r\n    const handleExpandClick = (nodeId) => {\r\n        const expandArr = expanded.filter(id => id !== nodeId).length === expanded.length ? [...expanded, nodeId] : expanded.filter(id => id !== nodeId)\r\n\r\n        setExpanded(expandArr)\r\n        localStorage.setItem(\"expanded\", JSON.stringify(expandArr))\r\n    }\r\n\r\n    const addPaper = (id, data = papers) => {\r\n        const paperId = uuid()\r\n\r\n        const updatedDataArr = data.map(dataItem => {\r\n            if (dataItem.id === id) {\r\n                handleExpandClick(`${id}`)\r\n                if (dataItem.children && dataItem.children.length !== 0) {\r\n                    return {\r\n                        ...dataItem,\r\n                        children: [\r\n                            ...dataItem.children,\r\n                            {\r\n                                id: paperId,\r\n                                title: `Untitled`,\r\n                                text: ''\r\n                            }\r\n                        ]\r\n                    };\r\n                } else {\r\n                    return {\r\n                        ...dataItem,\r\n                        children: [\r\n                            {\r\n                                id: paperId,\r\n                                title: `Untitled`,\r\n                                text: ``\r\n                            }\r\n                        ]\r\n                    };\r\n                }\r\n\r\n            } else if (dataItem.children && dataItem.children.length !== 0) {\r\n                return {\r\n                    ...dataItem,\r\n                    children: addPaper(id, dataItem.children)\r\n                }\r\n\r\n            } else {\r\n                return dataItem;\r\n            }\r\n        });\r\n\r\n        if (data === papers) {\r\n            setActiveFile(paperId)\r\n            setPaper(updatedDataArr)\r\n            handleExpandClick(paperId)\r\n        } else {\r\n            return updatedDataArr\r\n        }\r\n    }\r\n\r\n    const deletePaper = (id, data = papers) => {\r\n        const updatedDataArr = [];\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n            if (data[i].id === id) {\r\n\r\n            } else if (data[i].children && data[i].length !== 0) {\r\n                updatedDataArr.push({\r\n                    ...data[i],\r\n                    children: deletePaper(id, data[i].children)\r\n                })\r\n            } else {\r\n                updatedDataArr.push(data[i])\r\n            }\r\n        }\r\n        if (data === papers) {\r\n            setPaper(updatedDataArr)\r\n        } else {\r\n            return updatedDataArr\r\n        }\r\n    }\r\n\r\n    const onUpdateTask = (newTask) => {\r\n        const arrB = tasks.slice(0, tasks.map(taskItem => taskItem.id).indexOf(newTask.id))\r\n        const arrA = tasks.slice(tasks.map(taskItem => taskItem.id).indexOf(newTask.id) + 1)\r\n        const updatedDataArr = tasks.map(taskItem => taskItem.id).indexOf(newTask.id) !== -1 ? [...arrB, newTask, ...arrA] : [newTask, ...tasks]\r\n        console.log('onUpdate', updatedDataArr)\r\n        setTasks(updatedDataArr.filter(item => Boolean(item.id)))\r\n    }\r\n\r\n    const onDeleteTask = (newTask) => {\r\n        const arrB = tasks.slice(0, tasks.map(taskItem => taskItem.id).indexOf(newTask.id))\r\n        const arrA = tasks.slice(tasks.map(taskItem => taskItem.id).indexOf(newTask.id) + 1)\r\n        const updatedDataArr = [...arrB, ...arrA]\r\n        console.log('onDelete', updatedDataArr)\r\n        setTasks(updatedDataArr.filter(item => Boolean(item.id)))\r\n    }\r\n\r\n    const defaultDrawerWidth = 240;\r\n    const [drawerWidth, setDrawerWidth] = useState(localStorage.drawerWidth ? JSON.parse(localStorage.drawerWidth) : defaultDrawerWidth);\r\n    const [saveNotification, setSaveNotification] = useState(false)\r\n\r\n    const saveData = () => {\r\n        console.log('saving')\r\n        setDoc(doc(db, `users/${user.uid}`), {\r\n            papers: JSON.stringify(papers),\r\n            tasks: JSON.stringify(tasks)\r\n        })\r\n        return false\r\n    }\r\n\r\n    const saveHandler = (e) => {\r\n        if (e.ctrlKey && e.key === 's') {\r\n            e.preventDefault()\r\n            saveData()\r\n            setSaveNotification(true)\r\n\r\n            return false\r\n        }\r\n    }\r\n\r\n    useEventListener('keydown', saveHandler);\r\n\r\n    useEffect(() => {\r\n        if (dataGetted) {\r\n            saveData()\r\n        }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [papers, tasks])\r\n\r\n    const handleSaveNotificationClose = (event, reason) => {\r\n        if (reason === 'clickaway') {\r\n            return;\r\n          }\r\n      \r\n        setSaveNotification(false);\r\n    }\r\n\r\n    const action = (\r\n        <>\r\n          <IconButton\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            color=\"inherit\"\r\n            onClick={handleSaveNotificationClose}\r\n          >\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </>\r\n      );\r\n\r\n    return (\r\n        <>\r\n            <Box sx={{ display: 'flex' }}>\r\n                <CssBaseline />\r\n                <Topbar\r\n                    papers={papers}\r\n                    setActiveFile={setActiveFile}\r\n                    handleDrawerOpen={handleDrawerOpen}\r\n                />\r\n                <Sidebar\r\n                    papers={papers}\r\n                    activeFile={activeFile}\r\n                    setActiveFile={setActiveFile}\r\n                    open={open}\r\n                    handleDrawerClose={handleDrawerClose}\r\n                    addPaper={addPaper}\r\n                    deletePaper={deletePaper}\r\n                    drawerWidth={drawerWidth}\r\n                    setDrawerWidth={setDrawerWidth}\r\n                    expanded={expanded}\r\n                    handleExpandClick={handleExpandClick}\r\n                />\r\n                {showEditor && <Editor\r\n                    getActiveFile={getActiveFile(papers)}\r\n                    onUpdateNote={onUpdateNote}\r\n                    onUpdateTask={onUpdateTask}\r\n                    onDeleteTask={onDeleteTask}\r\n                    open={open}\r\n                    drawerWidth={drawerWidth}\r\n                    tasks={tasks}\r\n                />}\r\n                {showTasks && <Tasks\r\n                    tasks={tasks}\r\n                    onUpdateTask={onUpdateTask}\r\n                    onDeleteTask={onDeleteTask}\r\n                    drawerWidth={drawerWidth}\r\n                    open={open}\r\n                    getFileId={getFileId}\r\n                    setActiveFile={setActiveFile}\r\n                />}\r\n                <Snackbar\r\n                    open={saveNotification}\r\n                    autoHideDuration={6000}\r\n                    onClose={handleSaveNotificationClose}\r\n                    message=\"Зміни збережено\"\r\n                    action={action}\r\n                />\r\n            </Box>\r\n        </>\r\n    )\r\n}\r\n","import { useEffect, useRef } from 'react'\r\n\r\n// Hook\r\nexport default function useEventListener(eventName, handler, element = window){\r\n    // Create a ref that stores handler\r\n    const savedHandler = useRef();\r\n  \r\n    // Update ref.current value if handler changes.\r\n    // This allows our effect below to always get latest handler ...\r\n    // ... without us needing to pass it in effect deps array ...\r\n    // ... and potentially cause effect to re-run every render.\r\n    useEffect(() => {\r\n      savedHandler.current = handler;\r\n    }, [handler]);\r\n  \r\n    useEffect(\r\n      () => {\r\n        // Make sure element supports addEventListener\r\n        // On \r\n        const isSupported = element && element.addEventListener;\r\n        if (!isSupported) return;\r\n  \r\n        // Create event listener that calls handler function stored in ref\r\n        const eventListener = event => savedHandler.current(event);\r\n  \r\n        // Add event listener\r\n        element.addEventListener(eventName, eventListener);\r\n  \r\n        // Remove event listener on cleanup\r\n        return () => {\r\n          element.removeEventListener(eventName, eventListener);\r\n        };\r\n      },\r\n      [eventName, element] // Re-run if eventName or element changes\r\n    );\r\n  };","import Avatar from '@mui/material/Avatar'\r\nimport Button from '@mui/material/Button'\r\nimport CssBaseline from '@mui/material/CssBaseline'\r\nimport TextField from '@mui/material/TextField'\r\nimport Grid from '@mui/material/Grid'\r\nimport Box from '@mui/material/Box'\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined'\r\nimport Typography from '@mui/material/Typography'\r\nimport Container from '@mui/material/Container'\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\r\nimport { useCallback } from 'react'\r\nimport { getAuth, signInWithEmailAndPassword } from 'firebase/auth'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Copyright(props) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" to=\"/\">\r\n        routini\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst theme = createTheme();\r\n\r\nexport default function SignIn() {\r\n  const handleSubmit = useCallback(async e => {\r\n    e.preventDefault()\r\n\r\n    const { email, password } = e.target.elements\r\n    const auth = getAuth()\r\n    try {\r\n      await signInWithEmailAndPassword(auth, email.value, password.value)\r\n    } catch (e) {\r\n      alert(e.message)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <Box\r\n          sx={{\r\n            marginTop: 8,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Увійти\r\n          </Typography>\r\n          <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"email\"\r\n              label=\"Електронна адреса\"\r\n              name=\"email\"\r\n              autoComplete=\"email\"\r\n              autoFocus\r\n            />\r\n            <TextField\r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              name=\"password\"\r\n              label=\"Пароль\"\r\n              type=\"password\"\r\n              id=\"password\"\r\n              autoComplete=\"current-password\"\r\n            />\r\n            {/* <FormControlLabel\r\n              control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n              label=\"Запам'ятати мене\"\r\n            /> */}\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              Увійти\r\n            </Button>\r\n            <Grid container>\r\n              {/* <Grid item xs>\r\n                <Link href=\"#\" variant=\"body2\">\r\n                  Забули пароль?\r\n                </Link>\r\n              </Grid> */}\r\n              <Grid item>\r\n                <Link to=\"/signup\" variant=\"body2\">\r\n                  {\"Немає облікового запису? Зареєструватися\"}\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Box>\r\n        <Copyright sx={{ mt: 8, mb: 4 }} />\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n}","import Avatar from '@mui/material/Avatar'\r\nimport Button from '@mui/material/Button'\r\nimport CssBaseline from '@mui/material/CssBaseline'\r\nimport TextField from '@mui/material/TextField'\r\nimport Grid from '@mui/material/Grid'\r\nimport Box from '@mui/material/Box'\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined'\r\nimport Typography from '@mui/material/Typography'\r\nimport Container from '@mui/material/Container'\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\r\nimport { useCallback } from 'react'\r\nimport { getAuth, createUserWithEmailAndPassword } from 'firebase/auth'\r\nimport { doc, setDoc } from 'firebase/firestore'\r\nimport { db } from '../utils/firebase'\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction Copyright(props) {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\" {...props}>\r\n      {'Copyright © '}\r\n      <Typography color=\"inherit\">\r\n        routini\r\n      </Typography>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst theme = createTheme();\r\n\r\nexport default function SignUp({ setUserId }) {\r\n  const handleSubmit = useCallback(async e => {\r\n    e.preventDefault()\r\n\r\n    const { email, password } = e.target.elements\r\n    const auth = getAuth()\r\n    try {\r\n      await createUserWithEmailAndPassword(auth, email.value, password.value)\r\n      await setDoc(doc(db, `users/${auth.currentUser.uid}`), {\r\n        drawerWidth: 240,\r\n        papers: JSON.stringify([{\r\n          id: 1,\r\n          title: 'Замітки',\r\n          children: []\r\n        }]),\r\n        tasks: JSON.stringify([{}]),\r\n      })\r\n} catch (e) {\r\n  alert(e.message)\r\n}\r\n  }, [])\r\n\r\nreturn (\r\n  <ThemeProvider theme={theme}>\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <Box\r\n        sx={{\r\n          marginTop: 8,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Зареєструватися\r\n        </Typography>\r\n        <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                autoComplete=\"given-name\"\r\n                name=\"firstName\"\r\n                required\r\n                fullWidth\r\n                id=\"firstName\"\r\n                label=\"Ім'я\"\r\n                autoFocus\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                required\r\n                fullWidth\r\n                id=\"lastName\"\r\n                label=\"Прізвище\"\r\n                name=\"lastName\"\r\n                autoComplete=\"family-name\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                required\r\n                fullWidth\r\n                id=\"email\"\r\n                label=\"Електронна адреса\"\r\n                name=\"email\"\r\n                autoComplete=\"email\"\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                required\r\n                fullWidth\r\n                name=\"password\"\r\n                label=\"Пароль\"\r\n                type=\"password\"\r\n                id=\"password\"\r\n                autoComplete=\"new-password\"\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            sx={{ mt: 3, mb: 2 }}\r\n          >\r\n            Зареєструватися\r\n          </Button>\r\n          <Grid container justifyContent=\"flex-end\">\r\n            <Grid item>\r\n              <Link to=\"/login\" variant=\"body2\">\r\n                Вже є аккаунт? Заходьте\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      </Box>\r\n      <Copyright sx={{ mt: 5 }} />\r\n    </Container>\r\n  </ThemeProvider>\r\n);\r\n}","import React, { createContext } from 'react'\r\nimport {\r\n    HashRouter,\r\n    Route,\r\n    Routes,\r\n    Navigate,\r\n    Link\r\n} from 'react-router-dom'\r\nimport { AuthContextProvider, useAuthState } from '../../utils/firebase'\r\nimport Main from '../../pages/main'\r\nimport SignIn from '../../pages/sign-in'\r\nimport SignUp from '../../pages/sign-up'\r\nimport Box from '@mui/material/Box'\r\n\r\nexport const PapersContext = createContext();\r\n\r\nconst AuthenticatedRoute = ({ children }) => {\r\n    const { isAuthenticated } = useAuthState()\r\n    console.log(`AuthenticatedRoute: ${isAuthenticated}`)\r\n\r\n    return isAuthenticated ? children : <Navigate to=\"/login\" />\r\n}\r\n\r\nconst UnauthenticatedRoute = ({ children }) => {\r\n    const { isAuthenticated } = useAuthState()\r\n    console.log(`UnauthenticatedRoute: ${isAuthenticated}`)\r\n\r\n    return !isAuthenticated ? children : <Navigate to=\"/\" />\r\n\r\n}\r\n\r\nexport default function App() {\r\n\r\n\r\n    return (\r\n        <AuthContextProvider>\r\n            <HashRouter>\r\n                <Box sx={{ display: 'none' }}>\r\n                    <Link to=\"/\">Home</Link> | <Link to=\"/login\">Login</Link> |{' '}\r\n                    <Link to=\"/signup\">SignUp</Link>\r\n                </Box>\r\n                <Routes>\r\n                    <Route\r\n                        path=\"/\"\r\n                        element={\r\n                            <AuthenticatedRoute>\r\n                                <Main />\r\n                            </AuthenticatedRoute>\r\n                        }\r\n                    >\r\n\r\n                    </Route>\r\n                    <Route path=\":key\" element={\r\n                        <AuthenticatedRoute>\r\n                            <Main showEditor={true} />\r\n                        </AuthenticatedRoute>\r\n\r\n                    } />\r\n                    <Route path=\"tasks\" element={\r\n                        <AuthenticatedRoute>\r\n                            <Main showTasks={true} />\r\n                        </AuthenticatedRoute>\r\n\r\n                    } />\r\n                    <Route\r\n                        path=\"/signup\"\r\n                        element={\r\n                            <UnauthenticatedRoute>\r\n                                <SignUp />\r\n                            </UnauthenticatedRoute>\r\n                        }\r\n                    />\r\n                    <Route\r\n                        path=\"/login\"\r\n                        element={\r\n                            <UnauthenticatedRoute >\r\n                                <SignIn />\r\n                            </UnauthenticatedRoute>\r\n                        }\r\n                    />\r\n                </Routes>\r\n            </HashRouter>\r\n        </AuthContextProvider>\r\n    )\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/app/app'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}